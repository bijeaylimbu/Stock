"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e,t=require("react"),n=(e=t)&&"object"==typeof e&&"default"in e?e.default:e;function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return n}(e,t)||d(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e){return function(e){if(Array.isArray(e))return f(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||d(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){if(e){if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function h(e,t){var n=t.get(e);if(!n)throw new TypeError("attempted to get private field on non-instance");return n.get?n.get.call(e):n.value}function p(e,t,n){var r=t.get(e);if(!r)throw new TypeError("attempted to set private field on non-instance");if(r.set)r.set.call(e,n);else{if(!r.writable)throw new TypeError("attempted to set read only private field");r.value=n}return n}function m(){return(m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function g(e,t){var n;void 0===t&&(t=y);var r,i=[],o=!1;return function(){for(var a=[],l=0;l<arguments.length;l++)a[l]=arguments[l];return o&&n===this&&t(a,i)?r:(r=e.apply(this,a),o=!0,n=this,i=a,r)}}function w(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}!function(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===n&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}}(".react-fluid-table {\n  background-color: white;\n  border: 1px solid #ececec;\n}\n\n.react-fluid-table .cell,\n.react-fluid-table .header-cell {\n  -webkit-box-sizing: border-box;\n  -moz-box-sizing: border-box;\n  box-sizing: border-box;\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n  padding: 8px;\n}\n\n.react-fluid-table-container {\n  will-change: height;\n}\n\n.sticky-header {\n  position: -webkit-sticky;\n  position: sticky;\n  top: 0;\n  left: 0;\n  width: 100%;\n  z-index: 1;\n}\n\n.row-wrapper {\n  display: inline-block;\n}\n\n.react-fluid-table-header {\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n  background-color: #dedede;\n}\n\n.header-cell {\n  -webkit-align-items: baseline;\n  -webkit-box-align: baseline;\n  -ms-flex-align: baseline;\n  align-items: baseline;\n}\n\n.header-cell-text {\n  font-family: Helvetica;\n  font-weight: bold;\n  color: #7d7d7d;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.header-cell-arrow {\n  width: 0;\n  height: 0;\n  margin-left: 4px;\n  border-left: 5px solid transparent;\n  border-right: 5px solid transparent;\n}\n\n.header-cell-arrow.asc {\n  border-bottom: 10px solid #7d7d7d;\n}\n\n.header-cell-arrow.desc {\n  border-top: 10px solid #7d7d7d;\n}\n\n.react-fluid-table-row {\n  border-bottom: 1px solid #ececec;\n}\n\n.react-fluid-table-row:last-child {\n  border-bottom: none;\n}\n\n.row-container {\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n}\n\n.cell {\n  -webkit-align-items: center;\n  -webkit-box-align: center;\n  -ms-flex-align: center;\n  align-items: center;\n  position: relative;\n  overflow: hidden;\n}\n\n.expander {\n  cursor: pointer;\n  height: 1em;\n  width: 1em;\n}\n\n.hidden {\n  display: none;\n}\n");var b="object"==typeof performance&&"function"==typeof performance.now?function(){return performance.now()}:function(){return Date.now()};function x(e){cancelAnimationFrame(e.id)}var S=null;function E(e){if(void 0===e&&(e=!1),null===S||e){var t=document.createElement("div"),n=t.style;n.width="50px",n.height="50px",n.overflow="scroll",n.direction="rtl";var r=document.createElement("div"),i=r.style;return i.width="100px",i.height="100px",t.appendChild(r),document.body.appendChild(t),t.scrollLeft>0?S="positive-descending":(t.scrollLeft=1,S=0===t.scrollLeft?"negative":"positive-ascending"),document.body.removeChild(t),S}return S}process.env.NODE_ENV;var C=function(e,t){return e},I=null,_=null;function O(e){var n,r,i=e.getItemOffset,o=e.getEstimatedTotalSize,a=e.getItemSize,l=e.getOffsetForIndexAndAlignment,c=e.getStartIndexForOffset,s=e.getStopIndexForStartIndex,u=e.initInstanceProps,d=e.shouldResetStyleCacheOnItemSizeChange,f=e.validateProps;return r=n=function(e){var n,r;function h(t){var n;return(n=e.call(this,t)||this)._instanceProps=u(n.props,v(v(n))),n._outerRef=void 0,n._resetIsScrollingTimeoutId=null,n.state={instance:v(v(n)),isScrolling:!1,scrollDirection:"forward",scrollOffset:"number"==typeof n.props.initialScrollOffset?n.props.initialScrollOffset:0,scrollUpdateWasRequested:!1},n._callOnItemsRendered=void 0,n._callOnItemsRendered=g((function(e,t,r,i){return n.props.onItemsRendered({overscanStartIndex:e,overscanStopIndex:t,visibleStartIndex:r,visibleStopIndex:i})})),n._callOnScroll=void 0,n._callOnScroll=g((function(e,t,r){return n.props.onScroll({scrollDirection:e,scrollOffset:t,scrollUpdateWasRequested:r})})),n._getItemStyle=void 0,n._getItemStyle=function(e){var t,r=n.props,o=r.direction,l=r.itemSize,c=r.layout,s=n._getItemStyleCache(d&&l,d&&c,d&&o);if(s.hasOwnProperty(e))t=s[e];else{var u,f=i(n.props,e,n._instanceProps),h=a(n.props,e,n._instanceProps),p="horizontal"===o||"horizontal"===c;s[e]=((u={position:"absolute"})["rtl"===o?"right":"left"]=p?f:0,u.top=p?0:f,u.height=p?"100%":h,u.width=p?h:"100%",t=u)}return t},n._getItemStyleCache=void 0,n._getItemStyleCache=g((function(e,t,n){return{}})),n._onScrollHorizontal=function(e){var t=e.currentTarget,r=t.clientWidth,i=t.scrollLeft,o=t.scrollWidth;n.setState((function(e){if(e.scrollOffset===i)return null;var t=n.props.direction,a=i;if("rtl"===t)switch(E()){case"negative":a=-i;break;case"positive-descending":a=o-r-i}return a=Math.max(0,Math.min(a,o-r)),{isScrolling:!0,scrollDirection:e.scrollOffset<i?"forward":"backward",scrollOffset:a,scrollUpdateWasRequested:!1}}),n._resetIsScrollingDebounced)},n._onScrollVertical=function(e){var t=e.currentTarget,r=t.clientHeight,i=t.scrollHeight,o=t.scrollTop;n.setState((function(e){if(e.scrollOffset===o)return null;var t=Math.max(0,Math.min(o,i-r));return{isScrolling:!0,scrollDirection:e.scrollOffset<t?"forward":"backward",scrollOffset:t,scrollUpdateWasRequested:!1}}),n._resetIsScrollingDebounced)},n._outerRefSetter=function(e){var t=n.props.outerRef;n._outerRef=e,"function"==typeof t?t(e):null!=t&&"object"==typeof t&&t.hasOwnProperty("current")&&(t.current=e)},n._resetIsScrollingDebounced=function(){var e,t,r,i;null!==n._resetIsScrollingTimeoutId&&x(n._resetIsScrollingTimeoutId),n._resetIsScrollingTimeoutId=(e=n._resetIsScrolling,t=150,r=b(),i={id:requestAnimationFrame((function n(){b()-r>=t?e.call(null):i.id=requestAnimationFrame(n)}))})},n._resetIsScrolling=function(){n._resetIsScrollingTimeoutId=null,n.setState({isScrolling:!1},(function(){n._getItemStyleCache(-1,null)}))},n}r=e,(n=h).prototype=Object.create(r.prototype),n.prototype.constructor=n,n.__proto__=r,h.getDerivedStateFromProps=function(e,t){return k(e,t),f(e),null};var p=h.prototype;return p.scrollTo=function(e){e=Math.max(0,e),this.setState((function(t){return t.scrollOffset===e?null:{scrollDirection:t.scrollOffset<e?"forward":"backward",scrollOffset:e,scrollUpdateWasRequested:!0}}),this._resetIsScrollingDebounced)},p.scrollToItem=function(e,t){void 0===t&&(t="auto");var n=this.props.itemCount,r=this.state.scrollOffset;e=Math.max(0,Math.min(e,n-1)),this.scrollTo(l(this.props,e,t,r,this._instanceProps))},p.componentDidMount=function(){var e=this.props,t=e.direction,n=e.initialScrollOffset,r=e.layout;if("number"==typeof n&&null!=this._outerRef){var i=this._outerRef;"horizontal"===t||"horizontal"===r?i.scrollLeft=n:i.scrollTop=n}this._callPropsCallbacks()},p.componentDidUpdate=function(){var e=this.props,t=e.direction,n=e.layout,r=this.state,i=r.scrollOffset;if(r.scrollUpdateWasRequested&&null!=this._outerRef){var o=this._outerRef;if("horizontal"===t||"horizontal"===n)if("rtl"===t)switch(E()){case"negative":o.scrollLeft=-i;break;case"positive-ascending":o.scrollLeft=i;break;default:var a=o.clientWidth,l=o.scrollWidth;o.scrollLeft=l-a-i}else o.scrollLeft=i;else o.scrollTop=i}this._callPropsCallbacks()},p.componentWillUnmount=function(){null!==this._resetIsScrollingTimeoutId&&x(this._resetIsScrollingTimeoutId)},p.render=function(){var e=this.props,n=e.children,r=e.className,i=e.direction,a=e.height,l=e.innerRef,c=e.innerElementType,s=e.innerTagName,u=e.itemCount,d=e.itemData,f=e.itemKey,h=void 0===f?C:f,p=e.layout,v=e.outerElementType,y=e.outerTagName,g=e.style,w=e.useIsScrolling,b=e.width,x=this.state.isScrolling,S="horizontal"===i||"horizontal"===p,E=S?this._onScrollHorizontal:this._onScrollVertical,I=this._getRangeToRender(),_=I[0],O=I[1],k=[];if(u>0)for(var M=_;M<=O;M++)k.push(t.createElement(n,{data:d,key:h(M,d),index:M,isScrolling:w?x:void 0,style:this._getItemStyle(M)}));var W=o(this.props,this._instanceProps);return t.createElement(v||y||"div",{className:r,onScroll:E,ref:this._outerRefSetter,style:m({position:"relative",height:a,width:b,overflow:"auto",WebkitOverflowScrolling:"touch",willChange:"transform",direction:i},g)},t.createElement(c||s||"div",{children:k,ref:l,style:{height:S?"100%":W,pointerEvents:x?"none":void 0,width:S?W:"100%"}}))},p._callPropsCallbacks=function(){if("function"==typeof this.props.onItemsRendered&&this.props.itemCount>0){var e=this._getRangeToRender(),t=e[0],n=e[1],r=e[2],i=e[3];this._callOnItemsRendered(t,n,r,i)}if("function"==typeof this.props.onScroll){var o=this.state,a=o.scrollDirection,l=o.scrollOffset,c=o.scrollUpdateWasRequested;this._callOnScroll(a,l,c)}},p._getRangeToRender=function(){var e=this.props,t=e.itemCount,n=e.overscanCount,r=this.state,i=r.isScrolling,o=r.scrollDirection,a=r.scrollOffset;if(0===t)return[0,0,0,0];var l=c(this.props,a,this._instanceProps),u=s(this.props,l,a,this._instanceProps),d=i&&"backward"!==o?1:Math.max(1,n),f=i&&"forward"!==o?1:Math.max(1,n);return[Math.max(0,l-d),Math.max(0,Math.min(t-1,u+f)),l,u]},h}(t.PureComponent),n.defaultProps={direction:"ltr",itemData:void 0,layout:"vertical",overscanCount:2,useIsScrolling:!1},r}"production"!==process.env.NODE_ENV&&"undefined"!=typeof window&&void 0!==window.WeakSet&&(I=new WeakSet,_=new WeakSet);var k=function(e,t){var n=e.children,r=e.direction,i=e.height,o=e.layout,a=e.innerTagName,l=e.outerTagName,c=e.width,s=t.instance;if("production"!==process.env.NODE_ENV){null==a&&null==l||_&&!_.has(s)&&(_.add(s),console.warn("The innerTagName and outerTagName props have been deprecated. Please use the innerElementType and outerElementType props instead."));var u="horizontal"===r||"horizontal"===o;switch(r){case"horizontal":case"vertical":I&&!I.has(s)&&(I.add(s),console.warn('The direction prop should be either "ltr" (default) or "rtl". Please use the layout prop to specify "vertical" (default) or "horizontal" orientation.'));break;case"ltr":case"rtl":break;default:throw Error('An invalid "direction" prop has been specified. Value should be either "ltr" or "rtl". "'+r+'" was specified.')}switch(o){case"horizontal":case"vertical":break;default:throw Error('An invalid "layout" prop has been specified. Value should be either "horizontal" or "vertical". "'+o+'" was specified.')}if(null==n)throw Error('An invalid "children" prop has been specified. Value should be a React component. "'+(null===n?"null":typeof n)+'" was specified.');if(u&&"number"!=typeof c)throw Error('An invalid "width" prop has been specified. Horizontal lists must specify a number for width. "'+(null===c?"null":typeof c)+'" was specified.');if(!u&&"number"!=typeof i)throw Error('An invalid "height" prop has been specified. Vertical lists must specify a number for height. "'+(null===i?"null":typeof i)+'" was specified.')}},M=function(e,t,n){var r=e.itemSize,i=n.itemMetadataMap,o=n.lastMeasuredIndex;if(t>o){var a=0;if(o>=0){var l=i[o];a=l.offset+l.size}for(var c=o+1;c<=t;c++){var s=r(c);i[c]={offset:a,size:s},a+=s}n.lastMeasuredIndex=t}return i[t]},W=function(e,t,n,r,i){for(;r<=n;){var o=r+Math.floor((n-r)/2),a=M(e,o,t).offset;if(a===i)return o;a<i?r=o+1:a>i&&(n=o-1)}return r>0?r-1:0},z=function(e,t,n,r){for(var i=e.itemCount,o=1;n<i&&M(e,n,t).offset<r;)n+=o,o*=2;return W(e,t,Math.min(n,i-1),Math.floor(n/2),r)},R=function(e,t){var n=e.itemCount,r=t.itemMetadataMap,i=t.estimatedItemSize,o=t.lastMeasuredIndex,a=0;if(o>=n&&(o=n-1),o>=0){var l=r[o];a=l.offset+l.size}return a+(n-o-1)*i},T=O({getItemOffset:function(e,t,n){return M(e,t,n).offset},getItemSize:function(e,t,n){return n.itemMetadataMap[t].size},getEstimatedTotalSize:R,getOffsetForIndexAndAlignment:function(e,t,n,r,i){var o=e.direction,a=e.height,l=e.layout,c=e.width,s="horizontal"===o||"horizontal"===l?c:a,u=M(e,t,i),d=R(e,i),f=Math.max(0,Math.min(d-s,u.offset)),h=Math.max(0,u.offset-s+u.size);switch("smart"===n&&(n=r>=h-s&&r<=f+s?"auto":"center"),n){case"start":return f;case"end":return h;case"center":return Math.round(h+(f-h)/2);case"auto":default:return r>=h&&r<=f?r:r<h?h:f}},getStartIndexForOffset:function(e,t,n){return function(e,t,n){var r=t.itemMetadataMap,i=t.lastMeasuredIndex;return(i>0?r[i].offset:0)>=n?W(e,t,i,0,n):z(e,t,Math.max(0,i),n)}(e,n,t)},getStopIndexForStartIndex:function(e,t,n,r){for(var i=e.direction,o=e.height,a=e.itemCount,l=e.layout,c=e.width,s="horizontal"===i||"horizontal"===l?c:o,u=M(e,t,r),d=n+s,f=u.offset+u.size,h=t;h<a-1&&f<d;)h++,f+=M(e,h,r).size;return h},initInstanceProps:function(e,t){var n={itemMetadataMap:{},estimatedItemSize:e.estimatedItemSize||50,lastMeasuredIndex:-1};return t.resetAfterIndex=function(e,r){void 0===r&&(r=!0),n.lastMeasuredIndex=Math.min(n.lastMeasuredIndex,e-1),t._getItemStyleCache(-1),r&&t.forceUpdate()},n},shouldResetStyleCacheOnItemSizeChange:!1,validateProps:function(e){var t=e.itemSize;if("production"!==process.env.NODE_ENV&&"function"!=typeof t)throw Error('An invalid "itemSize" prop has been specified. Value should be a function. "'+(null===t?"null":typeof t)+'" was specified.')}});function N(e,t){for(var n in e)if(!(n in t))return!0;for(var r in t)if(e[r]!==t[r])return!0;return!1}var P=function(e){var r=e.disableHeight,i=e.disableWidth,o=e.children,a=t.useRef(0),l=t.useRef(null),c=s(t.useState({height:0,width:0}),2),u=c[0],d=c[1],f=u.height,h=u.width,p=t.useCallback((function(){if(l.current&&l.current.parentElement){var e=l.current.parentElement,t=window.getComputedStyle(e),n=parseInt(t.paddingLeft)||0,r=parseInt(t.paddingRight)||0,i=parseInt(t.paddingTop)||0,o=parseInt(t.paddingBottom)||0,a=(e.offsetHeight||0)-i-o,c=(e.offsetWidth||0)-n-r;d({height:a,width:c})}}),[f,h,r,i]),m=t.useCallback((function(){window.clearTimeout(a.current),a.current=window.setTimeout(p,40)}),[p]);return t.useEffect((function(){return p()}),[]),t.useEffect((function(){return window.addEventListener("resize",m),function(){window.clearTimeout(a.current),window.removeEventListener("resize",m)}}),[m,a]),n.createElement("div",{ref:l},f||h?o({height:r?0:f,width:i?0:h}):null)},j={scrollWidth:0,clientWidth:0},D={expanded:{},columns:[],pixelWidths:[],uuid:"",minColumnWidth:80,fixedWidth:0,remainingCols:0,sortColumn:null,sortDirection:null},A=["sortColumn","sortDirection","minColumnWidth","onSort","columns","tableStyle","headerStyle"],H=t.createContext({state:D,dispatch:function(){}}),L=function(e){return e.reduce((function(e,t){return{fixedWidth:e.fixedWidth+(t.width||0),remainingCols:e.remainingCols+(void 0===t.width?1:0)}}),{fixedWidth:0,remainingCols:0})},F=function(e,t){switch(t.type){case"updateSortedColumn":return l({},e,{sortColumn:t.col,sortDirection:t.dir});case"updateExpanded":return l({},e,{expanded:l({},e.expanded,i({},t.key,!e.expanded[t.key]))});case"updatePixelWidths":return l({},e,{pixelWidths:t.widths});case"refresh":return l({},e,{},t.initialState);default:return e}},q=function(e){var r=e.children,i=e.initialState,o=t.useRef(i),a=s(t.useReducer(F,l({},D,{},i,{},L(i.columns))),2),c=a[0],u=a[1];return t.useEffect((function(){var e=function(e,t){var n=new Set;return A.forEach((function(r){e[r]!==t[r]&&n.add(r)})),n}(o.current,i);if(e.size){var t={};e.forEach((function(e){t[e]=i[e]})),t.columns&&(t=l({},t,{},L(t.columns))),o.current=i,u({type:"refresh",initialState:t})}}),[o,i]),n.createElement(H.Provider,{value:{state:c,dispatch:u}},r)},U=n.memo((function(e){var r=e.column,i=e.width,o=t.useContext(H),a=o.state,l=a.sortColumn,c=a.sortDirection,s=a.onSort,u=o.dispatch,d=c?c.toUpperCase():null,f={cursor:r.sortable?"pointer":void 0,width:i?"".concat(i,"px"):void 0,minWidth:i?"".concat(i,"px"):void 0},h=function(){if(r.sortable){var e=l,t=d,n="ASC",i=r.key;e===i&&(i=(n=t?"ASC"===t?"DESC":null:"ASC")?i:null),u({type:"updateSortedColumn",col:i,dir:n}),s&&s(i,n)}};if(!r.header||"string"==typeof r.header)return n.createElement("div",{className:"header-cell",onClick:h,style:f},r.header?n.createElement("div",{className:"header-cell-text"},r.header):null,r.key!==l?null:n.createElement("div",{className:"header-cell-arrow ".concat((d||"").toLowerCase())}));var p=r.header,m=r.key===l&&d||null;return n.createElement(p,{style:f,onClick:h,sortDirection:m})})),V=t.forwardRef((function(e,r){var i=e.children,a=c(e,["children"]),l=t.useContext(H).state,s=l.id,u=l.uuid,d=l.columns,f=l.pixelWidths,h=l.headerStyle,p=r.current||j,m=p.scrollWidth<=p.clientWidth?"100%":void 0;return n.createElement("div",o({id:s,ref:r,"data-table-key":u,className:"react-fluid-table-container"},a),n.createElement("div",{className:"sticky-header","data-header-key":"".concat(u,"-header")},n.createElement("div",{className:"row-wrapper",style:{width:m}},n.createElement("div",{className:"react-fluid-table-header",style:h},d.map((function(e,t){return n.createElement(U,{key:e.key,column:e,width:f[t]})}))))),n.createElement("div",{className:"row-wrapper"},i))}));V.displayName="Header";var B=function e(t){r(this,e),i(this,"index",void 0),i(this,"height",void 0),this.index=t.index,this.height=t.height},K=function e(){var t=this;r(this,e),$.set(this,{writable:!0,value:[]}),G.set(this,{writable:!0,value:new Set}),i(this,"getMedian",(function(){if(!h(t,$).length)return 0;if(h(t,$).length%2==0){var e=h(t,$)[Math.floor(h(t,$).length/2)],n=h(t,$)[Math.ceil(h(t,$).length/2)];return(e.height+n.height)/2}var r=Math.floor(h(t,$).length/2);return h(t,$)[r].height})),i(this,"insert",(function(e){var n=Math.floor(h(t,$).length/2);t._insert(0,n,h(t,$).length,e)})),i(this,"clearFromIndex",(function(e){e<=0?(p(t,$,[]),h(t,G).clear()):(p(t,$,h(t,$).filter((function(t){return t.index<e}))),p(t,G,new Set(h(t,$).map((function(e){return e.index})))))})),i(this,"hasIndex",(function(e){return h(t,G).has(e)})),i(this,"_insert",(function(e,n,r,i){var o=h(t,$)[n];if(o&&o.height!==i.height)if(i.height<o.height){if(n===e)return void t._addLeafNode(e,i);var a=Math.floor((n-e)/2);t._insert(e,a,n,i)}else{var l=Math.ceil((r+n)/2);if(l===r)return void t._addLeafNode(r,i);t._insert(n,l,r,i)}else t._addLeafNode(n,i)})),i(this,"_addLeafNode",(function(e,n){h(t,$).splice(e,0,new B(n)),h(t,G).add(n.index)}))},$=new WeakMap,G=new WeakMap;function J(){return(J=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var Q=t.createElement("path",{fill:"currentColor",d:"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zM124 296c-6.6 0-12-5.4-12-12v-56c0-6.6 5.4-12 12-12h264c6.6 0 12 5.4 12 12v56c0 6.6-5.4 12-12 12H124z"});function X(e){return t.createElement("svg",J({"aria-hidden":"true","data-prefix":"fas","data-icon":"minus-circle",className:"minus-circle_svg__svg-inline--fa minus-circle_svg__fa-minus-circle minus-circle_svg__fa-w-16",viewBox:"0 0 512 512"},e),Q)}function Y(){return(Y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var Z=t.createElement("path",{fill:"currentColor",d:"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm144 276c0 6.6-5.4 12-12 12h-92v92c0 6.6-5.4 12-12 12h-56c-6.6 0-12-5.4-12-12v-92h-92c-6.6 0-12-5.4-12-12v-56c0-6.6 5.4-12 12-12h92v-92c0-6.6 5.4-12 12-12h56c6.6 0 12 5.4 12 12v92h92c6.6 0 12 5.4 12 12v56z"});function ee(e){return t.createElement("svg",Y({"aria-hidden":"true","data-prefix":"fas","data-icon":"plus-circle",className:"plus-circle_svg__svg-inline--fa plus-circle_svg__fa-plus-circle plus-circle_svg__fa-w-16",viewBox:"0 0 512 512"},e),Z)}var te=n.memo((function(e){var t=e.row,r=e.index,i=e.width,o=e.column,a=e.isExpanded,l=e.clearSizeCache,c=e.onExpanderClick,s={width:i?"".concat(i,"px"):void 0,minWidth:i?"".concat(i,"px"):void 0};if(o.expander){if("boolean"==typeof o.expander){var u=a?X:ee;return(n.createElement("div",{className:"cell",style:s},n.createElement(u,{className:"expander",onClick:c})))}var d=o.expander;return(n.createElement(d,{style:s,isExpanded:a,onClick:c}))}if(!o.cell){var f=t[o.key]||null;if(o.content)if("string"==typeof o.content||"number"==typeof o.content)f=o.content;else{var h=o.content;f=n.createElement(h,{row:t,index:r,clearSizeCache:l})}return(n.createElement("div",{className:"cell",style:s},f))}var p=o.cell;return(n.createElement(p,{row:t,index:r,style:s,clearSizeCache:l}))})),ne=function(e){var r=e.row,i=e.index,o=e.children,a=e.onRowClick,c=e.containerStyle,s=e.rowRenderer,u=t.useCallback((function(e){a&&a(e,{index:i})}),[i,a]);if(s){var d=l({},c,{display:"flex"});return(n.createElement(s,{row:r,index:i,style:d},o))}return(n.createElement("div",{className:"row-container",style:c,onClick:u},o))},re=function(e){var r=e.row,i=e.index,o=e.style,a=e.borders,c=e.rowStyle,s=e.rowHeight,u=e.onRowClick,d=e.useRowWidth,f=e.rowRenderer,h=e.clearSizeCache,p=e.calculateHeight,m=e.generateKeyFromRow,v=e.subComponent,y=t.useRef(!1),g=t.useRef(null),w=t.useContext(H),b=o.height,x=w.dispatch,S=w.state,E=S.uuid,C=S.columns,I=S.expanded,_=S.pixelWidths,O=m(r,i),k="".concat(E,"-").concat(O),M=!!I[O],W={row:r,index:i,isExpanded:M,clearSizeCache:h},z=a?void 0:"none",R=l({height:s?M&&v?s:"100%":void 0},function(e,t){return t?"function"==typeof t?t(e):t:{}}(i,c)),T=t.useCallback((function(){x({type:"updateExpanded",key:m(r,i)}),y.current=!0}),[x,r,i,m,y]),N=t.useCallback((function(){g.current&&_.length&&b!==p(g.current,i)&&h(i)}),[g,i,b,p,h,_]);return t.useLayoutEffect((function(){y.current?h(i,!0):N(),y.current=!1}),[M,y,N,i,h]),n.createElement("div",{ref:g,className:"react-fluid-table-row","data-index":i,"data-row-key":k,style:l({},o,{borderBottom:z,width:d?o.width:void 0})},n.createElement(ne,{row:r,index:i,onRowClick:u,rowRenderer:f,containerStyle:R},C.map((function(e,t){return n.createElement(te,{key:"".concat(E,"-").concat(e.key,"-").concat(O),row:r,column:e,index:i,width:_[t],isExpanded:M,clearSizeCache:h,onExpanderClick:T})}))),v?n.createElement("div",{className:M?void 0:"hidden"},n.createElement(v,W)):null)},ie=n.memo((function(e){var t=e.data,r=e.index,i=c(e,["data","index"]),a=r-1,l=t.rows,s=c(t,["rows"]),u=l[a];return u?n.createElement(re,o({row:u,index:a},i,s)):null}),(function(e,t){var n=e.style,r=w(e,["style"]),i=t.style,o=w(t,["style"]);return!N(n,i)&&!N(r,o)})),oe=t.forwardRef((function(e,r){var i=e.style,a=e.children,s=c(e,["style","children"]),u=l({},t.useContext(H).state.tableStyle||{},{},i);return n.createElement("div",o({ref:r,style:u},s),a)})),ae=function(e,t){return document.querySelector("[data-row-key='".concat(e,"-").concat(t,"']"))},le=t.forwardRef((function(e,r){var i=e.data,o=e.width,a=e.height,d=e.itemKey,f=e.rowHeight,h=e.className,p=c(e,["data","width","height","itemKey","rowHeight","className"]),m=t.useRef(0),v=t.useRef(o),y=t.useRef({}),g=t.useRef(null),w=t.useRef(new K),b=t.useRef(null),x=t.useContext(H),S=s(t.useState(!0),2),E=S[0],C=S[1],I=s(t.useState(f||37),2),_=I[0],O=I[1],k=x.dispatch,M=x.state,W=M.uuid,z=M.columns,R=M.minColumnWidth,N=M.fixedWidth,P=M.remainingCols,D=M.pixelWidths,A=t.useCallback((function(e,t){var n=d?d(e):void 0;return void 0!==n?n:t}),[d]),L=t.useCallback((function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(g.current){if(window.clearTimeout(m.current),t)return w.current.clearFromIndex(e),void g.current.resetAfterIndex(e+1);m.current=window.setTimeout((function(){var e,t=null===(e=b.current)||void 0===e?void 0:e.children[1].children[0],n=parseInt((null==t?void 0:t.dataset.index)||"0")+1;w.current.clearFromIndex(n),g.current.resetAfterIndex(n)}),50)}}),[g,b,m,w]),F=t.useCallback((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n="number"==typeof e?e:t,r=A(i[n],n),o="number"==typeof e?ae(W,r):e;if(!o)return y.current[n]||_;var a=u(o.children).slice(f?1:0),l=(f||0)+a.reduce((function(e,t){return e+t.offsetHeight}),0);return y.current[n]=l,l}),[W,i,f,_,A]),q=t.useCallback((function(){var e=function(e,t,n,r,i){if(!e)return i.map((function(){return r}));var o=e.offsetWidth,a=Math.max(t,1),l=n,c=Math.max(o-l,0),s=Math.max(r,Math.floor(c/a));return i.map((function(e){if(e.width)return e.width;if(e.maxWidth&&s-e.maxWidth>0)return a=Math.max(a-1,1),l+=e.maxWidth,c=Math.max(o-l,0),s=Math.max(r,Math.floor(c/a)),e.maxWidth;if(e.minWidth&&e.minWidth-s>0)return a=Math.max(a-1,1),l+=e.minWidth,c=Math.max(o-l,0),s=Math.max(r,Math.floor(c/a)),e.minWidth;return s}))}(b.current,P,N,R,z);(function(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0})(e,D)||k({type:"updatePixelWidths",widths:e})}),[k,P,N,R,D,z]),U=t.useCallback((function(){var e,t=(null===(e=b.current)||void 0===e?void 0:e.parentElement)||j;C(t.scrollWidth<=t.clientWidth)}),[b]);return t.useEffect((function(){var e=b.current||j;C(e.scrollWidth<=e.clientWidth)}),[]),t.useEffect((function(){L(-1,!0),setTimeout((function(){q(),U()}),100)}),[]),t.useLayoutEffect(q,[o]),t.useEffect(U,[o]),t.useLayoutEffect((function(){v.current!==o&&(w.current.clearFromIndex(0),setTimeout((function(){if(b.current&&g.current){var e=0,t=0,n=g.current._instanceProps.itemMetadataMap||{};u(b.current.children[1].children).forEach((function(r,i){var o=r,a=parseInt(o.dataset.index||"0"),l=n[a+1].size,c=F(o,a);if(0===i)return e=parseInt(o.style.top),t=c,void(l!==c&&(o.style.height="".concat(c,"px")));var s=e+t;o.style.top="".concat(s,"px"),l!==c&&(o.style.height="".concat(c,"px")),e=s,t=c}))}}),0)),v.current=o}),[o,b,g,F]),t.useEffect((function(){return function(){m.current&&window.clearTimeout(m.current)}}),[m]),t.useImperativeHandle(r,(function(){return{scrollTo:function(e){return g.current.scrollTo(e)},scrollToItem:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"auto";return g.current.scrollToItem(e,t)}}})),n.createElement(T,{className:"react-fluid-table ".concat(h||"").trim(),ref:g,innerRef:b,innerElementType:V,outerElementType:oe,height:a,width:o,itemCount:i.length+1,itemKey:function(e,t){if(!e)return"".concat(W,"-header");var n=e-1,r=t.rows[n];return A(r,e)},itemSize:function(e){if(!e){var t=function(e){return document.querySelector("[data-header-key='".concat(e,"-header']"))}(W);return t?t.children[0].offsetHeight:37}return F(e-1)},onItemsRendered:function(){if(!f&&b.current){u(b.current.children[1].children).forEach((function(e){var t=e,n=parseInt(t.dataset.index||"0");w.current.hasIndex(n)||w.current.insert({index:n,height:F(t,n)})}));var e=w.current.getMedian();e&&_!==e&&O(e)}},itemData:l({rows:i,rowHeight:f,useRowWidth:E,clearSizeCache:L,calculateHeight:F,generateKeyFromRow:A},p)},ie)})),ce=t.forwardRef((function(e,r){var i=e.id,a=e.columns,l=e.minColumnWidth,u=e.onSort,d=e.sortColumn,f=e.sortDirection,h=e.tableHeight,p=e.tableWidth,m=e.tableStyle,v=e.headerStyle,y=c(e,["id","columns","minColumnWidth","onSort","sortColumn","sortDirection","tableHeight","tableWidth","tableStyle","headerStyle"]),g=void 0!==h,w=void 0!==p,b=s(t.useState("".concat(i||"data-table","-").concat(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;return Math.random().toString(36).substr(2,e)}())),1)[0];return n.createElement(q,{initialState:{id:i,uuid:b,columns:a,minColumnWidth:l,onSort:u,sortColumn:d,sortDirection:f,tableStyle:m,headerStyle:v}},"number"==typeof h&&"number"==typeof p?n.createElement(le,o({ref:r,height:h,width:p},y)):n.createElement(P,{disableHeight:g,disableWidth:w},(function(e){var t,i=e.height,a=e.width;return(n.createElement(le,o({ref:r,width:p||a,height:h||i||(t=y.rowHeight,10*Math.max(t||37,10)+37)},y)))})))}));ce.defaultProps={borders:!0,minColumnWidth:80},exports.Table=ce;
